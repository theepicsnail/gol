function makeCheckbox(e,t){var n=document.createElement("input");return n.type="checkbox",n.onchange=saveState,n}function td(e){var t=document.createElement("td");return t.appendChild(e),t}function randomButton(e){var t=document.createElement("button");return t.innerText="Randomize",t.onclick=function(){for(var t in e)Math.random()>.5?e[t].checked=!0:e[t].checked=!1;saveState()},t}function saveState(){var e=survive_checkboxes.concat(born_checkboxes),t="";for(var n in e)t+=e[n].checked?1:0;location.hash=WIDTH+"x"+HEIGHT+"x"+cellSize+"x"+t}function loadState(){var e=location.hash.substr(1).split("x");WIDTH=parseInt(e[0])||100,HEIGHT=parseInt(e[1])||100,cellSize=parseInt(e[2])||10,state=e[3]||"001100000000100000";var t=survive_checkboxes.concat(born_checkboxes);for(var n in state)t[n].checked=state[n]=="1";saveState()}function newImageData(e){var t=ctx.createImageData(cellSize,cellSize);for(var n=0;n<cellSize*cellSize;n++)t.data[n*4+0]=e,t.data[n*4+1]=e,t.data[n*4+2]=e,t.data[n*4+3]=255;return t}function drawCell(e,t,n){ctx.putImageData(stateImageData[e],n*cellSize,t*cellSize)}function setCell(e,t,n){world[t][n]!=e&&(world[t][n]=e,drawCell(e,t,n))}function initalize(e){for(var t=0;t<HEIGHT;t++){world.push([]);for(var n=0;n<WIDTH;n++)setCell(Math.random()<e?ALIVE:DEAD,t,n)}}function singlePoint(){for(var e=0;e<HEIGHT;e++){world.push([]);for(var t=0;t<WIDTH;t++)e!=HEIGHT>>1||t!=WIDTH>>1?setCell(DEAD,e,t):setCell(ALIVE,e,t)}}function computeState(e,t){return e==ALIVE?next_state=survive_checkboxes[t].checked:next_state=born_checkboxes[t].checked,next_state?ALIVE:DEAD}var survive_checkboxes=[],born_checkboxes=[];for(var i=8;i>=0;i--){var c=makeCheckbox("survive",i);survive_checkboxes.splice(0,0,c),document.getElementById("s_list").appendChild(td(c)),c=makeCheckbox("born",i),born_checkboxes.splice(0,0,c),document.getElementById("b_list").appendChild(td(c))}document.getElementById("s_list").appendChild(randomButton(survive_checkboxes)),document.getElementById("b_list").appendChild(randomButton(born_checkboxes));var WIDTH,HEIGHT,cellSize;loadState();var world=[],stateImageData=[],ALIVE=1,DEAD=0,canvas=document.getElementsByTagName("canvas")[0];canvas.width=WIDTH*cellSize,canvas.height=HEIGHT*cellSize;var ctx=canvas.getContext("2d");stateImageData[ALIVE]=newImageData(0),stateImageData[DEAD]=newImageData(255);var dragging=!1;canvas.onmousedown=function(e){dragging=!0;var t=e.y/cellSize|0,n=e.x/cellSize|0;setCell(ALIVE,t,n)},canvas.onmouseup=function(e){dragging=!1},canvas.onmousemove=function(e){canvas.onmousedown(e)},initalize(.5),function e(){var t=world[0].slice(0),n=world[HEIGHT-1].slice(0);for(var r=0;r<HEIGHT;r++){var i=world[r].slice(0),s=r+1==HEIGHT?t:world[r+1],o=[];for(var u=0;u<WIDTH;u++){var a=u?u-1:WIDTH-1,f=u==WIDTH-1?0:u+1,l=i[u],c=(n[a]==ALIVE?1:0)+(n[u]==ALIVE?1:0)+(n[f]==ALIVE?1:0)+(s[a]==ALIVE?1:0)+(s[u]==ALIVE?1:0)+(s[f]==ALIVE?1:0)+(i[a]==ALIVE?1:0)+(i[f]==ALIVE?1:0);setCell(computeState(l,c),r,u)}n=i}requestAnimationFrame(e)}(),define("gol",function(){});